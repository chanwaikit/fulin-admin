{"version":3,"sources":["utils/callApi.js","routes/shop-list/index.js"],"names":["noop","apiBase","window","location","origin","callApi","custom","api","type","data","success","error","Promise","resolve","reject","request","timeout","withCredentials","send","end","err","res","ok","console","log","stringifiedBigNumber","text","replace","body","JSON","parse","response","TabPane","Option","RangePicker","Panel","Logon","state","shopList","namespaceId","getData","pickerDate","setState","spinning","onChangeSwitch","value","item","sid","teika_open","this","pShopList","modalInfo","visible","sort","a","b","mid","style","height","overflowY","StickyContainer","defaultActiveKey","country","map","tabItem","tab","key","String","gutter","filter","element","pid_sid","span","marginBottom","title","name","bordered","onChange","checkedChildren","unCheckedChildren","checked","PureComponent","Component"],"mappings":"2FAOa,SAAPA,KAPN,0CAQMC,EAAO,UAAMC,OAAOC,SAASC,OAAtB,QAoDEC,IAlDC,SAAC,GAOV,IAAD,EANJC,YAMI,IANJA,SAMI,EALJC,YAKI,IALJA,KAAM,GAKF,EAJJC,YAII,IAJJA,MAAO,OAIH,EAHJC,YAGI,IAHJA,MAAO,GAGH,EAFJC,YAEI,IAFJA,SAAUV,EAEN,EADJW,YACI,IADJA,OAAQX,EACJ,EACJ,OAAO,IAAIY,SAAQ,SAACC,EAASC,GAC3BC,IAAQP,EAAMF,EAAO,GAAD,OAAIC,GAAMN,EAAUM,GACrCS,QAAQ,KAERR,KAAK,oBACLS,kBAEAC,KAAKT,GACLU,KAAI,SAACC,EAAKC,GACLD,IAAQC,EAAIC,IAEdC,QAAQC,IAAR,4BAAiCJ,IACjCT,EAAMS,GACNN,EAAOM,KAkBDK,EAAuBJ,EAAIK,KAAKC,QAClC,sBACA,YAEEC,EAAOC,KAAKC,MAAML,GACxBf,EAAQkB,EAAKG,mB,mTCxCfC,G,cAHR,IAAOC,OACP,IAAQC,YACR,IAAQC,MACR,IAAQH,SAEFI,E,4MACJC,MAAQ,CACNC,SAAS,I,EAGXC,YAAY,K,EAKZC,QAAU,WACiB,EAAKH,MAAxBI,WAEP,EAAKC,SAAS,CACbC,UAASA,IAEVtC,YAAQ,CACPG,KAAM,OACND,IAAK,yBACLE,KAAM,GAINC,QAAS,WACL,EAAKgC,SAAS,CACZJ,SAFiB,uDAAP,MAKhB3B,MAAO,gB,EAMTiC,eAAiB,SAACC,EAAMC,GACtBvB,QAAQC,IAAIqB,EAAMC,EAAKC,KAEvB1C,YAAQ,CACRG,KAAM,OACND,IAAK,6BACLE,KAAM,CACLsC,IAAID,EAAKC,IACNC,WAAWH,GAEfnC,QAAS,WACN,EAAK8B,WAER7B,MAAO,gB,uDAxCT,WACCsC,KAAKT,Y,oBA6CN,WAAW,IACV,EADS,OAEHU,aADN,MAAyDD,KAAKZ,OAAvDc,UAAP,EAAuBC,QAAvB,EAAwCd,WAAW,GAAnD,GAC2Be,MAAK,SAACC,EAAGC,GACnC,OAAOD,EAAEE,IAAMD,EAAEC,OAWlB,OAAO,yBAAKC,MAAO,CAACC,OAAQ,OAAQC,UAAW,SAG9C,kBAAC,EAAAC,gBAAD,KACA,uBAAMC,iBAAiB,KAbX,CACZ,CAACL,IAAK,EAAGM,QAAS,gBAClB,CAACN,IAAK,EAAGM,QAAS,gBAClB,CAACN,IAAK,EAAGM,QAAS,gBAClB,CAACN,IAAK,EAAGM,QAAS,gBAClB,CAACN,IAAK,EAAGM,QAAS,sBAClB,CAACN,IAAK,EAAGM,QAAS,sBAClB,CAACN,IAAK,GAAIM,QAAS,iBAOZC,KAAI,SAACC,GACV,OAAO,kBAAChC,EAAD,CAASiC,IAAKD,EAAQF,QAASI,IAAKC,OAAOH,EAAQR,MACxD,yBAAKC,MAAO,CAACC,OAAQ,OAAQC,UAAW,SACvC,uBAAKS,OAAQ,IACXlB,EAAUmB,QAAO,SAACC,GAAc,OAAOA,EAAQd,KAAOQ,EAAQR,OAAQO,KAAI,SAACjB,GAC3E,OAAO,uBAAKoB,IAAKpB,EAAKyB,QAASC,KAAM,EAAGf,MAAO,CAACgB,aAAc,SAC7D,uBAAMC,MAAK,UAAK5B,EAAK6B,MAASlB,MAAO,CAACC,OAAQ,QAASkB,aAE3C,6BAAK,uBAAQC,SAAU,SAAChC,GACtB,EAAKD,eAAeC,EAAQ,IAAK,IAAIC,IACpCgC,gBAAgB,oBAAUC,kBAAkB,oBAAUC,QAA4B,KAAnBlC,EAAKE,gC,GAlF1EiC,iBAAiBC,aA8GvB9C","file":"static/js/18.e1c711f8.chunk.js","sourcesContent":["/* eslint-disable */\nimport each from 'lodash/each';\nimport isArray from 'lodash/isArray';\nimport isPlainObject from 'lodash/isPlainObject';\n\nimport request from 'superagent';\n\nconst noop = () => {};\nconst apiBase = `${window.location.origin}/api`;\n\nconst callApi = ({\n  custom = false,\n  api = '',\n  type = 'POST',\n  data = {},\n  success = noop,\n  error = noop\n}) => {\n  return new Promise((resolve, reject) => {\n    request(type, custom?`${api}`:apiBase + api)\n      .timeout(200000)\n      // .type('form')\n      .type('application/json')\n      .withCredentials()\n      // .send(toFlattenMap(data))\n      .send(data)\n      .end((err, res) => {\n        if (err || !res.ok) {\n          // not alert, console log\n          console.log(`not 200 error msg:${err}`);\n          error(err);\n          reject(err);\n        } else {\n          // http res code is 200\n          // if (res.body.errorCode === 200) {\n          //   // normal\n          //   const stringifiedBigNumber = res.text.replace(\n          //     /([^\\\\])\":(\\d{15,})/g,\n          //     '$1\":\"$2\"'\n          //   );\n          //   const body = JSON.parse(stringifiedBigNumber);\n          //   success(body.response);\n          //   resolve(body.response);\n          // } else if (error) {\n          //   error(res.body);\n          //   reject(res.body);\n          // } else {\n          //   console.warn(res.body.errorDescription);\n          // }\n          const stringifiedBigNumber = res.text.replace(\n              /([^\\\\])\":(\\d{15,})/g,\n              '$1\":\"$2\"'\n            );\n          const body = JSON.parse(stringifiedBigNumber);\n          success(body.response);\n        }\n      });\n  });\n};\n\nexport default callApi;\n\nfunction prepend(prefix, name, separator) {\n  if (prefix) {\n    if (separator) {\n      return `${prefix}.${name}`;\n    }\n    return prefix + name;\n  }\n  return name;\n}\n\nfunction flatten(prefix, obj, map) {\n  if (obj) {\n    if (isArray(obj)) {\n      for (let i = 0; i < obj.length; i++) {\n        const item = obj[i];\n        flatten(prepend(prefix, `[${i}]`, false), item, map);\n      }\n    } else if (isPlainObject(obj)) {\n      if (obj.__type__ === 'map') {\n        each(obj, function (propertyObject, propertyName) {\n          if (propertyName !== '__type__') {\n            flatten(\n              prepend(prefix, `[${propertyName}]`, false),\n              propertyObject,\n              map\n            );\n          }\n        });\n      } else {\n        each(obj, function (propertyObject, propertyName) {\n          flatten(prepend(prefix, propertyName, true), propertyObject, map);\n        });\n      }\n    } else {\n      map[prefix] = obj;\n    }\n  }\n}\n\nfunction toFlattenMap(obj) {\n  const map = {};\n\n  flatten(null, obj, map);\n  return map;\n}\n","//框架依赖\nimport React, {Component, PureComponent} from 'react';\nimport { Select, Input, Tabs, DatePicker, Button, Empty, Checkbox, Modal, Row, Col, Collapse, Descriptions, Menu,Switch, Dropdown, Card, Table } from 'antd';\nimport callApi from 'utils/callApi';\nimport moment from 'moment';\nimport { DownOutlined, EditOutlined, EllipsisOutlined, SettingOutlined } from '@ant-design/icons';\nimport { StickyContainer, Sticky } from 'react-sticky';\n\nimport dayjs from 'dayjs';\n\nimport './index.less';\nconst {Option} = Select;\nconst { RangePicker } = DatePicker;\nconst { Panel } = Collapse;\nconst { TabPane } = Tabs;\n\nclass Logon extends (PureComponent || Component) {\n  state = {\n    shopList:[]\n  }\n\n  namespaceId='11'\n\n  componentDidMount () {\n  \tthis.getData();\n  }\n  getData = () => {\n  \tconst {pickerDate = []} = this.state;\n\n  \tthis.setState({\n  \t\tspinning: true\n  \t});\n  \tcallApi({\n  \t\ttype: 'POST',\n  \t\tapi: '/statistic/getShopList',\n  \t\tdata: {\n  \t\t\t// startDate: dayjs(pickerDate[0]).format('YYYY-MM-DD'),\n  \t\t\t// endDate: dayjs(pickerDate[1]).format('YYYY-MM-DD')\n  \t\t},\n  \t\tsuccess: (res = []) => {\n        this.setState({\n          shopList:res\n        })\n  \t\t},\n  \t\terror: () => {\n\n  \t\t}\n  \t});\n  }\n  \n  onChangeSwitch = (value,item) =>{\n    console.log(value,item.sid)\n\n    callApi({\n  \t\ttype: 'POST',\n  \t\tapi: '/statistic/updateShopTeika',\n  \t\tdata: {\n  \t\t\tsid:item.sid,\n        teika_open:value\n  \t\t},\n  \t\tsuccess: (res = []) => {\n       this.getData()\n  \t\t},\n  \t\terror: () => {\n\n  \t\t}\n  \t});\n  }\n\n  render () {\n  \tconst {modalInfo = {}, visible = false, shopList = []} = this.state;\n  \tconst pShopList = shopList.sort((a, b) => {\n  \t\treturn a.mid - b.mid;\n  \t});\n  \tconst tabs = [\n  \t\t{mid: 1, country: '美国'},\n  \t\t{mid: 4, country: '英国'},\n  \t\t{mid: 5, country: '德国'},\n  \t\t{mid: 6, country: '法国'},\n  \t\t{mid: 7, country: '意大利'},\n  \t\t{mid: 8, country: '西班牙'},\n  \t\t{mid: 10, country: '日本'},\n  \t];\n  \treturn <div style={{height: '100%', overflowY: 'auto'}}>\n  \t\t\n\n  \t\t<StickyContainer>\n  \t\t<Tabs defaultActiveKey=\"1\" >\n  \t\t\t{tabs.map((tabItem) => {\n  \t\t\t\treturn <TabPane tab={tabItem.country} key={String(tabItem.mid)}>\n  \t\t\t\t\t\t<div style={{height: '75vh', overflowY: 'auto'}}>\n  \t\t\t\t\t\t\t<Row gutter={24}>\n  \t\t\t\t\t\t\t\t{pShopList.filter((element) => { return element.mid == tabItem.mid; }).map((item) => {\n  \t\t\t\t\t\t\t\t\treturn <Col key={item.pid_sid} span={6} style={{marginBottom: '20px'}}>\n  \t\t\t\t\t\t\t\t\t\t<Card title={`${item.name}` } style={{height: '100%'}} bordered={true}>\n  \t\t\t\t\t\t\t\t\t\t\t{/* {this.processChild(item)} */}\n                        <div><Switch onChange={(value)=>{\n                          this.onChangeSwitch(value ? '1' :'0',item)\n                        }} checkedChildren=\"teika开启\" unCheckedChildren=\"teika关闭\" checked={item.teika_open == '1'} /></div>\n  \t\t\t\t\t\t\t\t\t\t</Card>\n  \t\t\t\t\t\t\t\t\t</Col>;\n  \t\t\t\t\t\t\t\t})}\n  \t\t\t\t\t\t\t</Row>\n  \t\t\t\t\t\t</div>\n  \t\t\t</TabPane>;\n  \t\t\t})}\n\n  \t\t</Tabs>\n  \t\t</StickyContainer>\n  \t\t\t{/* <Row gutter={24}>\n  \t\t\t\t{pSkuList.map((item) => {\n  \t\t\t\treturn <Col key={item.pid_sid} span={6} style={{marginBottom: '20px'}}>\n  \t\t\t\t\t<Card title={`${item.local_name}_${item.country}` } style={{height: '100%'}} bordered={true}\n  \t\t\t\t\t\textra={<EditOutlined key=\"edit\" onClick={e => this.onClickMenu(item)}/>\n  \t\t\t\t\t}\n  \t\t\t\t\t>\n  \t\t\t\t\t{this.processChild(item)}\n\n  \t\t\t\t\t</Card>\n  \t\t\t\t</Col>;\n  \t\t\t\t})}\n  \t\t\t</Row> */}\n\n  \t</div>;\n  }\n}\nexport default Logon;\n"],"sourceRoot":""}