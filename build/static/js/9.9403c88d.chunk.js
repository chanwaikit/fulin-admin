(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{365:function(e,t,n){"use strict";function a(){}var c=n(376),i=n.n(c),o=(c=n(81),n.n(c)),r=(c=n(377),n.n(c)),l=(c=n(378),n.n(c)),s="".concat(window.location.origin,"/api");function u(e,t,n){return e?n?"".concat(e,".").concat(t):e+t:t}t.a=function(e){var t,n=void 0!==(t=e.custom)&&t,c=void 0===(t=e.api)?"":t,d=void 0===(t=e.type)?"POST":t,p=void 0===(t=e.data)?{}:t,m=void 0===(t=e.success)?a:t,f=void 0===(e=e.error)?a:e;return new Promise((function(e,t){var a;l()(d,n?"".concat(c):s+c).timeout(2e5).type("form").withCredentials().send((function e(t,n,a){if(n)if(o()(n))for(var c=0;c<n.length;c++){var l=n[c];e(u(t,"[".concat(c,"]"),!1),l,a)}else r()(n)?"map"===n.__type__?i()(n,(function(n,c){"__type__"!==c&&e(u(t,"[".concat(c,"]"),!1),n,a)})):i()(n,(function(n,c){e(u(t,c,!0),n,a)})):a[t]=n}(null,p,a={}),a)).end((function(e,n){e||!n.ok?(console.log("not 200 error msg:".concat(e)),f(e),t(e)):(n=n.text.replace(/([^\\])":(\d{15,})/g,'$1":"$2"'),n=JSON.parse(n),m(n.response))}))}))}},379:function(e,t){},622:function(e,t,n){},641:function(e,t,n){"use strict";n.r(t);var a=n(407),c=n.n(a),i=n(629),o=n.n(i),r=n(372),l=n.n(r),s=n(373),u=n.n(s),d=n(403),p=n.n(d),m=(a=n(154),n.n(a)),f=n(385),v=n(58),_=n(59),h=n(61),y=n(60),b=(i=n(451),n.n(i)),g=(r=n(623),s=n.n(r),d=n(369),a=n.n(d),i=n(366),r=n.n(i),d=n(0),n.n(d)),k=n(365),E=(i=n(359),n.n(i)),O=n(644),S=n(615),j=(n(368),n(622),r.a.Option,a.a.RangePicker,s.a.Panel,b.a.TabPane);d=function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={pickerDate:[E()("2021-07-01","YYYY-MM-DD"),E()("2021/07/28","YYYY-MM-DD")]},e.namespaceId="11",e.getData=function(){e.state.pickerDate,e.setState({spinning:!0}),Object(k.a)({type:"POST",api:"/statistic/getSkuAdTable",data:{},success:function(){e.setState({skuList:0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}})},error:function(){}})},e.processData=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t={},n=[];for(var a in e.map((function(e){e=e.shopName,t[e]||(t[e]={})})),t)!function(a){t[a].sb=e.filter((function(e){return e.shopName===a&&"sb"===e.type})),t[a].sbv=e.filter((function(e){return e.shopName===a&&"sbv"===e.type})),t[a].sp=e.filter((function(e){return e.shopName===a&&"sp"===e.type})),n.push(a)}(a);return{result:n,arrayObj:t}},e.processChild=function(t){var n=void 0===(n=t.sb_groups)?[]:n,a=(t=void 0===(t=t.sp_groups)?[]:t,n=[].concat(Object(f.a)(n),Object(f.a)(t)),n=(t=e.processData(n)).result,t.arrayObj);t=g.a.createElement("div",null,n.map((function(e){return g.a.createElement("div",{key:e},g.a.createElement("div",null,"\u5e97\u94fa\uff1a",e),0<a[e].sb.length&&g.a.createElement("div",null,"SB\u5e7f\u544a\u7ec4\u5408:",a[e].sb.map((function(t,n){return g.a.createElement("span",{key:t.name},t.name," ",n===a[e].sb.length-1?"":"\u3001")}))),0<a[e].sbv.length&&g.a.createElement("div",null,"SBV\u5e7f\u544a\u7ec4\u5408:",a[e].sbv.map((function(t,n){return g.a.createElement("span",{key:t.name},t.name," ",n===a[e].sbv.length-1?"":"\u3001")}))),0<a[e].sp.length&&g.a.createElement("div",null,"SP\u5e7f\u544a\u7ec4\u5408:",a[e].sp.map((function(t,n){return g.a.createElement("span",{key:t.name},t.name," ",n===a[e].sp.length-1?"":"\u3001")}))))})));return 0<n.length?t:g.a.createElement(m.a,null)},e.processModalChild=function(){var t,n=void 0===(t=(a=e.state).selects)?[]:t,a=(void 0===(t=a.modalInfo)?{}:t).groupList,c=(a=void 0===(a=(t=e.processData(a)).result)?[]:a,t.arrayObj);return g.a.createElement("div",null,a.map((function(t){return g.a.createElement(o.a,{style:{marginBottom:"10px"},key:t},g.a.createElement("h3",null,"\u5e97\u94fa\uff1a",t),0<c[t].sb.length&&g.a.createElement("div",null,"SB\u5e7f\u544a\u7ec4\u5408:",g.a.createElement(l.a,null,c[t].sb.map((function(t,a){var c=t.sid+"_"+t.profile_id+"_"+t.portfolio_id+"_"+t.type;return g.a.createElement(u.a,{key:t.name,span:8},g.a.createElement(p.a,{onChange:function(t){t.target.checked?e.setState({selects:[].concat(Object(f.a)(n),[c])}):((t=Object(f.a)(n)).splice(t.indexOf(c),1),e.setState({selects:Object(f.a)(t)}))},checked:-1<n.indexOf(c),value:c},t.name))})))),0<c[t].sbv.length&&g.a.createElement("div",null,"SBV\u5e7f\u544a\u7ec4\u5408:",g.a.createElement(l.a,null,c[t].sbv.map((function(t,a){var c=t.sid+"_"+t.profile_id+"_"+t.portfolio_id+"_"+t.type;return g.a.createElement(u.a,{key:t.name,span:8},g.a.createElement(p.a,{onChange:function(t){t.target.checked?e.setState({selects:[].concat(Object(f.a)(n),[c])}):((t=Object(f.a)(n)).splice(t.indexOf(c),1),e.setState({selects:Object(f.a)(t)}))},checked:-1<n.indexOf(c),value:c},t.name))})))),0<c[t].sp.length&&g.a.createElement("div",null,"SP\u5e7f\u544a\u7ec4\u5408:",g.a.createElement(l.a,null,c[t].sp.map((function(t,a){var c=t.sid+"_"+t.profile_id+"_"+t.portfolio_id+"_"+t.type;return g.a.createElement(u.a,{key:t.name,span:8},g.a.createElement(p.a,{onChange:function(t){t.target.checked?e.setState({selects:[].concat(Object(f.a)(n),[c])}):((t=Object(f.a)(n)).splice(t.indexOf(c),1),e.setState({selects:Object(f.a)(t)}))},checked:-1<n.indexOf(c),value:c},t.name))})))))})))},e.onClickMenu=function(t){e.getGroupData(t)},e.getGroupData=function(t){var n=[].concat(Object(f.a)(t.sb_groups),Object(f.a)(t.sp_groups)),a=[];n.map((function(e){a.push(e.sid+"_"+e.profile_id+"_"+e.portfolio_id+"_"+e.type)})),e.setState({selects:a}),Object(k.a)({type:"POST",api:"/statistic/getAdGroup",data:{mid:t.mid},success:function(){e.setState({visible:!0,modalInfo:{local_sku_mid:t.local_sku+"_"+t.mid,mid:t.mid,local_sku:t.local_sku,local_name:t.local_name,title:t.local_name+"_"+t.country,groupList:0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],cid:t.cid,category_text:t.category_text}})},error:function(){}})},e.onSubmit=function(){var t,n=void 0===(n=(t=e.state).selects)?[]:n,a=void 0===(t=t.modalInfo)?{}:t,c=[],i=[];n.map((function(e){var t,n=(t=e.split("_"))[0],o=t[1];e=t[2];("sp"===(t=t[3])?i:c).push({type:t,sid:n,profile_id:o,portfolio_id:e,local_sku_sid:a.local_sku+"_"+n,cid:a.cid,category_text:a.category_text})})),Object(k.a)({type:"POST",api:"/statistic/updateAdGroup",data:{mid:a.mid,local_sku_mid:a.local_sku_mid,sbGroups:c,spGroups:i},success:function(){e.setState({visible:!1},(function(){e.getData()}))},error:function(){}})},e}return Object(_.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e,t=this,n=void 0===(a=(e=this.state).modalInfo)?{}:a,a=void 0!==(a=e.visible)&&a,i=(void 0===(e=e.skuList)?[]:e).sort((function(e,t){return e.mid-t.mid}));return g.a.createElement("div",{style:{height:"100%",overflowY:"auto"}},g.a.createElement(c.a,{width:"70%",title:n.title,visible:a,onOk:function(){t.onSubmit()},onCancel:function(){t.setState({visible:!1})}},g.a.createElement("div",{style:{height:"70vh",overflow:"auto"}},this.processModalChild())),g.a.createElement(S.StickyContainer,null,g.a.createElement(b.a,{defaultActiveKey:"1"},[{mid:1,country:"\u7f8e\u56fd"},{mid:4,country:"\u82f1\u56fd"},{mid:5,country:"\u5fb7\u56fd"},{mid:6,country:"\u6cd5\u56fd"},{mid:7,country:"\u610f\u5927\u5229"},{mid:8,country:"\u897f\u73ed\u7259"},{mid:10,country:"\u65e5\u672c"}].map((function(e){return g.a.createElement(j,{tab:e.country,key:String(e.mid)},g.a.createElement("div",{style:{height:"75vh",overflowY:"auto"}},g.a.createElement(l.a,{gutter:24},i.filter((function(t){return t.mid==e.mid})).map((function(e){return g.a.createElement(u.a,{key:e.pid_sid,span:6,style:{marginBottom:"20px"}},g.a.createElement(o.a,{title:"".concat(e.local_name,"_").concat(e.country),style:{height:"100%"},bordered:!0,extra:g.a.createElement(O.a,{key:"edit",onClick:function(n){return t.onClickMenu(e)}})},t.processChild(e)))})))))})))))}}]),n}(d.PureComponent||d.Component);t.default=d}}]);
//# sourceMappingURL=9.9403c88d.chunk.js.map